# DecisionTreeRegressor (from scratch)

В этом разделе реализовано дерево решений для регрессии
(`DecisionTreeRegressor`) с нуля, без использования `sklearn`.

Реализация предназначена для понимания внутренней логики алгоритма:
критерия разбиения, рекурсивного построения дерева и процесса предсказания.

---

## Постановка задачи

Целевая переменная — количество дней просрочки по кредиту (`delay_days`).

Несмотря на то, что значения таргета дискретны (целые числа),
задача формулируется как **регрессия**, поскольку:
- значения упорядочены,
- имеет смысл расстояние между ними,
- допустимы операции усреднения.

---

## Реализация модели

Реализован класс `DecisionTreeRegressor` со следующими характеристиками:

- тип задачи: регрессия
- критерий разбиения: **Mean Squared Error (MSE)**
- стратегия построения: **depth-wise** (в глубину)
- предсказание в листе: среднее значение таргета в узле
- формат предсказаний: `float` (для совместимости со `sklearn`)

### Критерии остановки
- `max_depth` — максимальная глубина дерева (`None` — без ограничения)
- `min_samples_split` — минимальное число объектов в узле для дальнейшего деления

---

## Проверка корректности

Корректность реализации проверялась следующим образом:

- модель обучалась и тестировалась на одном и том же разбиении данных,
- результаты сравнивались с `sklearn.tree.DecisionTreeRegressor`
  при одинаковых гиперпараметрах,
- значения метрик (MSE) совпали **1 в 1**,
  что подтверждает корректность логики разбиений и предсказаний.

Дополнительно использовались диагностические визуализации:
- scatter-график `y_true` vs `y_pred`,
- распределение ошибок (residuals).

---

## Содержимое папки

- [decisiontree.py](decisiontree.py)  
  Реализация `DecisionTreeRegressor` и структуры узла (`Node`).

- [decision_tree_regressor.ipynb](decision_tree_regressor.ipynb)  
  Пошаговое объяснение алгоритма, обучение модели, сравнение со `sklearn`
  и визуальный анализ результатов.

- [loan_delay_days.csv](loan_delay_days.csv)  
  Датасет с признаками и целевой переменной — количеством дней просрочки.

---

## Замечания

Реализация ориентирована на учебные и исследовательские цели.
Для практического использования в задачах с большим числом признаков
или объектов предпочтительны оптимизированные реализации
и ансамблевые методы (Random Forest, Gradient Boosting).

Тем не менее, данный модуль демонстрирует полный цикл построения
дерева решений для регрессии и позволяет понять алгоритм "изнутри".
